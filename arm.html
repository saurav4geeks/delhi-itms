<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Delhi ITMS</title>
    <!-- Bootstrap  5.2 stylesheet -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />
    <!-- Stylesheet -->
    <link rel="stylesheet" href="./assets/junc.css" />
  </head>
  <body>
    <!-- Main body -->
    <div class="header-body">
      <!-- Side Navbar section -->
      <div class="side-nav">
        <div class="user">
          <i class="fa-solid fa-circle-user fa-2xl"></i>
          <h4>USERNAME</h4>
        </div>
        <ul class="sidenav-links">
          <li>
            <a href="./home.html"
              ><i class="fa-regular fa-pen-to-square"></i>
              <p>Add/Edit</p></a
            >
          </li>
          <li>
            <a href="#"
              ><i class="fa-solid fa-chart-column"></i>
              <p>Report</p></a
            >
          </li>
          <li>
            <a href="./index.html"
              ><i class="fa fa-sign-out"></i>
              <p>Logout</p></a
            >
          </li>
          <div class="active"></div>
        </ul>
      </div>
      <!-- Main content section -->
      <div class="content-body">
        <!-- content header section -->
        <header>
          <div class="header-content">
            <img src="./assets/logo.png" alt="" />
            <h2>Delhi ITMS Site Survey App</h2>
          </div>
        </header>
        <!-- Content body -->
        <main>
          <div class="container pb-1">
            <h2 class="junc-head">ARM DATA</h2>
            <!-- Form starts -->
            <form action="">
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-4">
                    <label
                      for="junction-ID"
                      class="col-form-label col-form-label-sm "
                      >Junction Code</label
                    >
                  </div>
                  <div class="col-md-4">
                    <!-- <input
                      type="text"
                      id="junction-ID"
                      class="form-control form-control-sm"
                      placeholder="Select"
                      aria-label="junction-ID"
                    /> -->
                    <select
                      class="form-select form-select-sm select-junction-dd"
                      aria-label=".form-select-sm example"
                      id="junction-ID"
                    >
                      <option selected>Select</option>
  
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <!-- <div class="form-group">
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-4">
                    <label
                      for="junction-name"
                      class="col-form-label col-form-label-sm"
                      >Junction Name</label
                    >
                  </div>
                  <div class="col-md-4">
                    <input
                      type="text"
                      id="junction-name"
                      class="form-control form-control-sm"
                      placeholder="Auto Fill"
                      aria-label="junction-name"
                    />
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-4">
                    <label for="arm-no" class="col-form-label col-form-label-sm"
                      >Arm No</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      id="arm-no"
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                    >
                      <option disabled selected>Select</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-4">
                    <label
                      for="arm-name"
                      class="col-form-label col-form-label-sm"
                      >Arm Name</label
                    >
                  </div>
                  <div class="col-md-4">
                    <input
                      type="text"
                      id="arm-name"
                      class="form-control form-control-sm"
                      placeholder="Enter"
                      aria-label="arm-name"
                    />
                  </div>
                </div>
              </div>

              <!-- sub heading -->
              <h2 class="form-sub-heading">ARM DATA</h2>
              <!-- table heading -->
              <div class="row w-75 justify-content-between">
                <div class="col-md-2">
                  <h4 class="table-heading">Arm No</h4>
                </div>
                <div class="col-md-4">
                  <h4 class="table-heading">Parameter</h4>
                </div>
                <div class="col-md-4">
                  <h4 class="table-heading">Details</h4>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="arm-no-of-lanes"
                      class="col-form-label col-form-label-sm"
                      >No of Lanes</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="arm-no-of-lanes"
                    >
                      <option selected>Select</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="arm-width-lane"
                      class="col-form-label col-form-label-sm"
                      >Width of Complete lane</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="arm-width-lane"
                    >
                      <option selected>Select</option>
                      <option value="1">3.5</option>
                      <option value="2">4</option>
                      <option value="3">5</option>
                      <option value="4">7</option>
                      <option value="5">9</option>
                      <option value="6">10.5</option>
                      <option value="7">12.5</option>
                      <option value="8">14</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="arm-cycle-track"
                      class="col-form-label col-form-label-sm"
                      >Cycle Track</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="arm-cycle-track"
                    >
                      <option selected>Select</option>
                      <option value="1">Available</option>
                      <option value="2">Not Available</option>
                      <option value="3">Planned</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="arm-width-cycle"
                      class="col-form-label col-form-label-sm"
                      >Width of Cycle Track</label
                    >
                  </div>
                  <div class="col-md-4">
                    <!-- <input
                      type="text"
                      id="junction-width-cycle"
                      class="form-control form-control-sm"
                      placeholder="Select"
                      aria-label="junction-width-cycle"
                    /> -->
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="arm-width-cycle"
                    >
                      <option selected>Select</option>
                      <option value="1">1</option>
                      <option value="2">1.5</option>
                      <option value="3">2</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="arm-bus-stop"
                      class="col-form-label col-form-label-sm"
                      >Bus Stop</label
                    >
                  </div>
                  <div class="col-md-4">
                    <!-- <input
                      type="text"
                      id="junction-footpath"
                      class="form-control form-control-sm"
                      placeholder="Select"
                      aria-label="junction-footpath"
                    /> -->
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="arm-bus-stop"
                    >
                      <option selected>Select</option>
                      <option value="1">Available</option>
                      <option value="2">Not Available</option>
                      <option value="3">Planned</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="arm-bus-lane"
                      class="col-form-label col-form-label-sm"
                      >Bus Lane</label
                    >
                  </div>
                  <div class="col-md-4">
                    <!-- <input
                      type="text"
                      id="junction-width-footpath"
                      class="form-control form-control-sm"
                      placeholder="Select"
                      aria-label="junction-width-footpath"
                    /> -->
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="arm-bus-lane"
                    >
                      <option selected>Select</option>
                      <option value="1">Available</option>
                      <option value="2">Not Available</option>
                      <option value="3">Planned</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="arm-footpath-walking"
                      class="col-form-label col-form-label-sm"
                      >Pedestrian/Footpath Walking</label
                    >
                  </div>
                  <div class="col-md-4">
                    <!-- <input
                      type="text"
                      id="junction-zebra-crossing"
                      class="form-control form-control-sm"
                      placeholder="Select"
                      aria-label="junction-zebra-crossing"
                    /> -->
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="arm-footpath-walking"
                    >
                      <option selected>Select</option>
                      <option value="1">Available</option>
                      <option value="2">Not Available</option>
                      <option value="3">Planned</option>
                      <option value="4">Desired</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="arm-width-footpath"
                      class="col-form-label col-form-label-sm"
                      >Width of Pedestrian footpath</label
                    >
                  </div>
                  <div class="col-md-4">
                    <!-- <input
                      type="text"
                      id="junction-median-crossing"
                      class="form-control form-control-sm"
                      placeholder="Select"
                      aria-label="junction-median-crossing"
                    /> -->
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="arm-width-footpath"
                    >
                      <option selected>Select</option>
                      <option value="1">1</option>
                      <option value="2">1.5</option>
                      <option value="3">1.8</option>
                      <option value="4">2</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="arm-zebra-crossing"
                      class="col-form-label col-form-label-sm"
                      >Zebra Crossing</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="arm-zebra-crossing"
                    >
                      <option selected>Select</option>
                      <option value="1">Available</option>
                      <option value="2">Not Available</option>
                      <option value="3">Planned</option>
                      <option value="4">Desired</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- sub heading -->
              <h2 class="form-sub-heading">TI Feedback on Arm</h2>
              <!-- table heading -->
              <div class="row w-75 justify-content-between">
                <div class="col-md-2">
                  <h4 class="table-heading">Arm No</h4>
                </div>
                <div class="col-md-4">
                  <h4 class="table-heading">Parameter</h4>
                </div>
                <div class="col-md-4">
                  <h4 class="table-heading">Details</h4>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="ti-comment-cycle"
                      class="col-form-label col-form-label-sm"
                      >TI comment on Cycle Movement</label
                    >
                  </div>
                  <div class="col-md-4">
                    <input
                      type="text"
                      id="ti-comment-cycle"
                      class="form-control form-control-sm"
                      placeholder="Enter"
                      aria-label="junction-no-poles"
                    />
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="ti-comment-bus"
                      class="col-form-label col-form-label-sm"
                      >TI comment on Bus Movement</label
                    >
                  </div>
                  <div class="col-md-4">
                    <input
                      type="text"
                      id="ti-comment-bus"
                      class="form-control form-control-sm"
                      placeholder="Enter"
                      aria-label="junction-no-poles"
                    />
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="vip-movement"
                      class="col-form-label col-form-label-sm"
                      >VIP Movement</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="vip-movement"
                    >
                      <option selected>Select</option>
                      <option value="1">Yes</option>
                      <option value="2">No</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="congestion"
                      class="col-form-label col-form-label-sm"
                      >Congestion</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="congestion"
                    >
                      <option selected>Select</option>
                      <option value="1">Yes</option>
                      <option value="2">No</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="sensitivity"
                      class="col-form-label col-form-label-sm"
                      >Sensitivity</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="sensitivity"
                    >
                      <option selected>Select</option>
                      <option value="1">Yes</option>
                      <option value="2">No</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="rlvd-desired"
                      class="col-form-label col-form-label-sm"
                      >RLVD Desired</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="rlvd-desired"
                    >
                      <option selected>Select</option>
                      <option value="1">Yes</option>
                      <option value="2">No</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="anpr-desired"
                      class="col-form-label col-form-label-sm"
                      >ANPR Desired</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="anpr-desired"
                    >
                      <option selected>Select</option>
                      <option value="1">Yes</option>
                      <option value="2">No</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="speed-detection-desired"
                      class="col-form-label col-form-label-sm"
                      >Speed Detection Desired</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="speed-detection-desired"
                    >
                      <option selected>Select</option>
                      <option value="1">Yes</option>
                      <option value="2">No</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="vms-desired"
                      class="col-form-label col-form-label-sm"
                      >VMS Desired</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="vms-desired"
                    >
                      <option selected>Select</option>
                      <option value="1">Yes</option>
                      <option value="2">No</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="pa-system-desired"
                      class="col-form-label col-form-label-sm"
                      >PA System Desired</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="pa-system-desired"
                    >
                      <option selected>Select</option>
                      <option value="1">Yes</option>
                      <option value="2">No</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="panic-button"
                      class="col-form-label col-form-label-sm"
                      >Panic Button / Emergency call box desired</label
                    >
                  </div>
                  <div class="col-md-4">
                    <select
                      class="form-select form-select-sm"
                      aria-label=".form-select-sm example"
                      id="panic-button"
                    >
                      <option selected>Select</option>
                      <option value="1">Yes</option>
                      <option value="2">No</option>
                    </select>
                  </div>
                </div>
              </div>
              <!-- Form group -->
              <div class="form-group">
                <div class="row w-75 justify-content-between">
                  <div class="col-md-2">
                    <p class="armNo">1</p>
                  </div>
                  <div class="col-md-4">
                    <label
                      for="remarks-extra-signal"
                      class="col-form-label col-form-label-sm"
                      >Remarks on extra signal desired</label
                    >
                  </div>
                  <div class="col-md-4">
                    <input
                      type="text"
                      id="remarks-extra-signal"
                      class="form-control form-control-sm"
                      placeholder="Enter"
                      aria-label="remarks-extra-signal"
                    />
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="row w-100 justify-content-between">
                  <div class="col-md-4">
                    <h2 class="form-sub-heading">SURVEYOR REMARKS ON ARM</h2>
                    <label
                      for="junction-recom-td"
                      class="col-form-label col-form-label-sm"
                      >Comments on broken/missing items</label
                    >
                  </div>
                  <div class="col-md-6">
                    <textarea
                      class="form-control"
                      id="junction-recom-td"
                      rows="4"
                      placeholder="Enter Text"
                    ></textarea>
                  </div>
                </div>
              </div>
              <div class="row mt-4">
                <div class="col-md-2">
                  <div class="form-button-add">
                    <a href="./arm.html" id="btn-arm">+ ADD ARM</a>
                  </div>
                </div>
                <div class="col-md-2">
                  <div class="form-button-add">
                    <a href="./pole.html" id="btn-pole">+ ADD POLE</a>
                  </div>
                </div>
              </div>
              <div  id="successMessage"></div>
              <div class="form-button">
                <button id="submitArmForm" type="button" class="btn-next">NEXT</button>
              </div>
            </form>
            <!-- Form ends -->
          </div>
          <div class="bg"><img src="./assets/bg.png" alt="" /></div>
        </main>
      </div>
    </div>
    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
    <script>
      const armSelectBox = document.querySelector("#arm-no");

      function setArmNum(val) {
        const armNoTextList = document.querySelectorAll(".armNo");
        armNoTextList.forEach((armCell) => {
          armCell.innerText = val;
        });
      }

      armSelectBox.addEventListener("change", (e) => {
        setArmNum(e.target.value);
      });
    </script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  var currentUser = JSON.parse(localStorage.getItem('user'));
  var junctionData = [];
  var selectedJunctionMapId;
  var junctionId;
  var junctionName;
  // var selectedCircleId; 
  $(document).ready(function(){
    $.ajax({
      url: "http://65.0.170.23/delhi_items/DelhiItmsWebservice/getJunctionCode",
      type: 'POST',
      dataType: 'json', // added data type
      success: function(res) {
          console.log(res);
          var selectJuncDDHtml = '';
          junctionData = res.data;
          res.data.forEach(function(item) {
            selectJuncDDHtml += `<option value=${item.junctn_code}>${item.junctn_code}</option>`;
          })
          $(".select-junction-dd").append(selectJuncDDHtml);
         // alert(res);
      }
    }); 

    $('.select-junction-dd').on('change', function() {
        var selectedJunctionId = this.value;
        var isSelectedJuncFound = junctionData.find(item => item.junctn_code == this.value);
        if(isSelectedJuncFound) {
          console.log("isSleceted",isSelectedJuncFound);
          // $("#junction-code").val(isSelectedJuncFound.junctn_code);
          $("#junction-name").val(isSelectedJuncFound.junctn_name);
           selectedJunctionMapId = isSelectedJuncFound.circle_junctn_map_id;
           console.log( selectedJunctionMapId,"selectedJunctionMapId");
           junctionId = isSelectedJuncFound.junctn_code;
           junctionName = isSelectedJuncFound.junctn_name;
          //  selectedCircleId = isSelectedJuncFound.circle_id;
        }
      //  alert( this.value );
    });
  });

$("#submitArmForm").click(function(e){

    // e.preventDefault();
    // let formData = $('#junctionForm').serialize();
    let obj = {}
      obj["circle_junctn_map_id"] = selectedJunctionMapId;
      obj["junctn_code"] = junctionId;
      obj["junctn_name"]= junctionName;
      obj["arm_No"]= $("#arm-no").val();
      obj["arm_Name"]= $("#arm-name").val();
      obj["lanes_No"]= $("#arm-no-of-lanes").val();
      obj["lanes_Width"]= $("#arm-width-lane").val();
      obj["cycle_Track"]= $("#arm-cycle-track").val();
      obj["cycle_Track_Width"]= $("#arm-width-cycle").val();
      obj["bus_Stop"]= $("#arm-bus-stop").val();
      obj["bus_Lane"]= $("#arm-bus-lane").val();
      obj["Pedestrian"]= $("#arm-footpath-walking").val();
      obj["Pedestrian_Width"]= $("#arm-width-footpath").val();
      obj["zebra_Crossing"]= $("#arm-zebra-crossing").val();
      obj["cycle_Movement"]= $("#ti-comment-cycle").val();
      obj["bus_Movement"]= $("#ti-comment-bus").val();
      obj["VIP_Movement"]= $("#vip-movement").val();
      obj["congestion"]= $("#congestion").val();
      obj["sensitivity"]= $("#sensitivity").val();
      obj["RLVD_Desired"]= $("#rlvd-desired").val();
      obj["ANPR_Desired"]= $("#anpr-desired").val();
      obj["VMS_Desired"]= $("#vms-desired").val();
      obj["remarks_Signal_Desired"]= $("#remarks-extra-signal").val();
      obj["comments"]= $("#junction-recom-td").val();
      obj["speed_detection_desired"]= $("#speed-detection-desired").val();
      obj["pa_system_desired"]= $("#pa-system-desired").val();
      obj["panic_call_box_desired"]= $("#panic-button").val();
      obj["user_id"]= currentUser.user_id;

  $.ajax({
      url: "http://65.0.170.23/delhi_items/DelhiItmsWebservice/saveWebArmData",
      type: 'POST',
      contentType: 'application/json',
      data: JSON.stringify(obj),
      // dataType: 'json', // added data type
      // data: obj,
      success: function (response) {
          // let res = JSON.parse(response);
          // console.log("success response",res);
          if(response.isTrue == true) {

          // $("#successMessage").text("Data Saved Successfully"); 
          setTimeout(function(){
            alert("Data Saved Successfully");
            window.location.href = './pole.html'
          }, 500);

          }else {
          $("#successMessage").text("Data Not Saved Successfully"); 
          }
      },
      error: function (response) {

        if(response.statusText == "error") {

            // $("#successMessage").text("Data Not Saved Successfully"); 
            setTimeout(function(){
              alert("Data Not Saved Successfully");
              window.location.href = './arm.html'
            }, 500);

              // let res = JSON.parse(response);
              // console.log("Eror response",res);
            }
          // let res = JSON.parse(response);
          // console.log("Eror response",res);
      },
    }); 

});

</script>
  </body>
</html>
